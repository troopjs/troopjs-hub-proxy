define("troopjs-pubsub/version",[],{toString:function(){}}),define("troopjs-pubsub/proxy/deferred",["troopjs-core/component/emitter","troopjs-core/pubsub/hub","when","poly/array","poly/object"],function(a,b,c){function d(a){return function(b){var c=j.call(b);return c===l||c===m?a.apply(this,b):a.call(this,b)}}var e,f=Array.prototype,g=f.push,h=f.slice,i=Object.keys,j=Object.prototype.toString,k="[object String]",l="[object Array]",m="[object Arguments]",n="publish",o="subscribe",p="hub",q="routes",r="length",s="resolve",t="topic",u="defer",v="context",w="callback",x="memory";return a.extend(function(){this[q]=h.call(arguments)},{displayName:"pubsub/proxy/deferred","sig/initialize":function(){var a=this;a[q].forEach(function(f){if(!(p in f))throw new Error("'"+p+"' is missing from routes");var l=f[p],m=f[n]||{},q=f[o]||{};i(m).forEach(function(d){var f,i,n,o=m[d];if(j.call(o)===k)f=o,i=a,n=!1;else{if(!(t in o))throw new Error("'"+t+"' is missing from target '"+d+"'");f=o[t],i=o[v]||a,n=!!o[u]}var p=function(){var a,b,d=[f];return g.apply(d,h.call(arguments)),n&&(a=c.defer(),b=a[s],a[s]=a.resolver[s]=function(){b(h.call(arguments))},g.call(d,a)),l.publish.apply(l,d),a?a.promise:e},q=m[d]={};q[v]=i,q[w]=p,b.subscribe(d,q)}),i(q).forEach(function(e){var f,i,m,n=q[e];if(j.call(n)===k)f=n,i=a,m=!1;else{if(!(t in n))throw new Error("'"+t+"' is missing from target '"+e+"'");f=n[t],i=n[v]||a,m=!!n[x]}var o=function(){var a,e,i=[f];return g.apply(i,h.call(arguments,1)),c.isPromiseLike(i[i[r]-1])&&(a=i.pop()),e=b.publish.apply(b,i),a&&c(e,d(a.resolve),a.reject,a.progress),e},p=q[e]={};p[v]=i,p[w]=o,l.subscribe(e,i,m,o)})})},"sig/finalize":function(){var a=this;a[q].forEach(function(a){if(!(p in a))throw new Error("'"+p+"' is missing from routes");var c=a[p],d=a[n]||{},e=a[o]||{};i(d).forEach(function(a){b.unsubscribe(a,d[a])}),i(e).forEach(function(a){var b=e[a];c.unsubscribe(a,b[v],b[w])})})}})}),define("troopjs-pubsub/proxy/promise",["troopjs-core/component/emitter","troopjs-core/pubsub/hub","when","poly/array","poly/object"],function(a,b,c){var d=Array.prototype,e=d.push,f=d.slice,g=Object.keys,h=Object.prototype.toString,i="[object String]",j="publish",k="subscribe",l="hub",m="routes",n="topic",o="context",p="callback",q="peek";return a.extend(function(){this[m]=f.call(arguments)},{displayName:"pubsub/proxy/promise","sig/initialize":function(){var a=this;a[m].forEach(function(c){if(!(l in c))throw new Error("'"+l+"' is missing from routes");var d=c[l],m=c[j]||{},r=c[k]||{};g(m).forEach(function(c){var g,j,k,l=m[c];if(h.call(l)===i)g=l,j=a,k=!1;else{if(!(n in l))throw new Error("'"+n+"' is missing from target '"+c+"'");g=l[n],j=l[o]||a,k=!!l[q]}var r=function(){var a=[g];return e.apply(a,f.call(arguments)),d.publish.apply(d,a)},s=m[c]={};s[o]=j,s[p]=r,s[q]=k,b.subscribe(c,s)}),g(r).forEach(function(c){var g,j,k,l=r[c];if(h.call(l)===i)g=l,j=a,k=!1;else{if(!(n in l))throw new Error("'"+n+"' is missing from target '"+c+"'");g=l[n],j=l[o]||a,k=!!l[q]}var m=function(){var a=[g];return e.apply(a,f.call(arguments)),b.publish.apply(b,a)},s={};s[o]=j,s[p]=m,s[q]=k,d.subscribe(c,s)})})},"sig/start":function(){var a=this,d=[],e={};return a[m].forEach(function(a){if(!(l in a))throw new Error("'"+l+"' is missing from routes");var c=a[k]||{},f=a[j]||{},h=a[l];g(f).forEach(function(a){var c,g=f[a];g[q]===!0&&(c=b.peek(a,e))!==e&&d.push(h.publish.apply(b,[a].concat(c)))}),g(c).forEach(function(a){var f,g=c[a];g[q]===!0&&(f=h.peek(a,e))!==e&&d.push(b.publish.apply(b,[a].concat(f)))})}),c.all(d)},"sig/finalize":function(){var a=this;a[m].forEach(function(a){if(!(l in a))throw new Error("'"+l+"' is missing from routes");var c=a[j]||{},d=a[k]||{},e=a[l];g(c).forEach(function(a){b.unsubscribe(a,c[a])}),g(d).forEach(function(a){e.unsubscribe(a,d[a])})})}})}),define(["troopjs-pubsub/version"],function(a){return a});